{% load i18n static %}
{% if result_hidden_fields %}
<div class="hiddenfields">{# DIV for HTML validation #}
{% for item in result_hidden_fields %}{{ item }}{% endfor %}
</div>
{% endif %}
{% if results %}
<div id="celebrity_display_image"></div>
<div class="results box-body table-responsive no-padding">
<table id="result_list" class="table table-hover">
<thead>
<tr>
{% for header in result_headers %}
<th scope="col" {{ header.class_attrib }}>
   {% if header.sortable %}
     {% if header.sort_priority > 0 %}
       <div class="sortoptions">
         <a class="sortremove" href="{{ header.url_remove }}" title="{% trans "Remove from sorting" %}"></a>
         {% if num_sorted_fields > 1 %}<span class="sortpriority" title="{% blocktrans with priority_number=header.sort_priority %}Sorting priority: {{ priority_number }}{% endblocktrans %}">{{ header.sort_priority }}</span>{% endif %}
         <a href="{{ header.url_toggle }}" class="toggle {% if header.ascending %}ascending{% else %}descending{% endif %}" title="{% trans "Toggle sorting" %}"></a>
       </div>
     {% endif %}
   {% endif %}
   <div class="text">{% if header.sortable %}<a href="{{ header.url_primary }}">{{ header.text|capfirst }}</a>{% else %}<span>{{ header.text|capfirst }}</span>{% endif %}</div>
   <div class="clear"></div>
</th>{% endfor %}
</tr>
</thead>
<tbody>
{% for result in results %}
{% if result.form.non_field_errors %}
    <tr><td colspan="{{ result|length }}">{{ result.form.non_field_errors }}</td></tr>
{% endif %}
<tr class="{% cycle 'row1' 'row2' %}">{% for item in result %}{{ item }}{% endfor %}</tr>
{% endfor %}
</tbody>
</table>
</div>
{% endif %}
<script>
    window.onload=current_title
    var url = window.location.href;
    url_array = url.split("/");
    data = url_array[url_array.length-2];
    if(data == "celebritydisplay")
    {
        document.getElementById('celebrity_display_image').innerHTML="<p style='font-size: larger;'>Image below shows the order in which Stars will be arranged in web app landing page.<br/>Please assign stars to corresponding sequence numbers in the image</p><br/>"
        + "<img src='/media/web-images/celebrity_display_position.png' width='95%' /><br/><label>Title: <input type='text' id='celebrity_display_title' style='height:25px;'></label>  <input type='button' style='height:25px; padding:3px; width:70px;' value='Save' id='title_save_button' onclick=title_save()></label><br/>"
        + "<div id='current_title' style='padding-left:35px'></div>"
    }
    function title_save(){
      $.ajax({
      url: "/star_title?title="+document.getElementById("celebrity_display_title").value,
      success: function(data, status) {
        document.getElementById("current_title").innerHTML="Current Title : "+document.getElementById("celebrity_display_title").value
        document.getElementById("celebrity_display_title").value=''
      }
    });
    }
     function current_title() {
        $.ajax({
      url: "/api/v2/user/celebrity_display/?title=true",
      headers: {"version":"1.0", "device":"web"},
      success: function(data, status) {
        document.getElementById("current_title").innerHTML="Current Title : "+data.data.display_title
      }
    });
    }
</script>
